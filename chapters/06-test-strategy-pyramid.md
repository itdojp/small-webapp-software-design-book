---
title: "06. テスト戦略（単体/統合/E2E）"
permalink: /chapters/06-test-strategy-pyramid/
show_nav: true
prev: /chapters/05-design-for-testability/
next: /chapters/07-evolution-and-adr/
---

# 06. テスト戦略（単体/統合/E2E）

## 目的

- 単体/統合/E2E を「量の議論」ではなく、複雑さと価値導線に応じて配分する
- 壊れにくさ（変更耐性）を高めるための最小戦略を確立する

## 前提/用語

- **単体テスト**: 小さい単位（関数/モジュール）で振る舞いを検証
- **統合テスト**: 境界を跨ぐ結合（DB、HTTP、状態管理など）を検証
- **E2E**: ユーザー導線として価値を提供できることを検証

## 要点

- E2E は少数精鋭で良いが、価値導線を外してはいけない
- 統合テストは「境界の契約」を守る。変更頻度と D（距離）が大きいほど重要になる
- 単体テストは「コア」の変更耐性を支える。V（変動性）が高い領域ほど意味が出る

## 演習（最小1個）

対象システムの主要導線を 3 つ選び、テスト配分案を作ってください。

- 導線1: …（E2E 1 本、統合 2 本、単体 5 本 など）
- 導線2: …
- 導線3: …

テンプレは Appendix B を利用してください。

## よくある失敗

- E2E を増やして安心しようとし、実行時間と不安定さで破綻する
- 統合ポイント（API、DB、認可）を単体で誤魔化し、本番で壊れる
- テストが仕様の代替になり、要件の合意が曖昧なまま進む

## チェックリスト

- [ ] 価値導線（ユーザー価値）に E2E が割り当てられている
- [ ] 境界（API/DB/認可）の契約が統合テストで検証されている
- [ ] 単体テストがコアの振る舞いを守っている（実装詳細に依存しない）

## 前後リンク

- [目次]({{ '/chapters/' | relative_url }})
- [前章: 05. 設計時にテストを織り込む]({{ '/chapters/05-design-for-testability/' | relative_url }})
- [次章: 07. 進化条件（ADRと境界の強化タイミング）]({{ '/chapters/07-evolution-and-adr/' | relative_url }})
