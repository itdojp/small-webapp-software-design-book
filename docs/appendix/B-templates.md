---
title: "Appendix B: テンプレ集"
permalink: /appendix/B-templates/
show_nav: true
prev: /appendix/A-checklists/
next: /appendix/D-samples/
---

# Appendix B: テンプレ集

本書で扱う判断・合意を「再利用可能な形式」にするためのテンプレートです。必要に応じてチーム向けに最小改変して使ってください。

記入例（完成形）が必要な場合は Appendix D を参照してください。

- [Appendix D: 記入例（ランニング例の完成形）]({{ '/appendix/D-samples/' | relative_url }})

## 使い分け（要求→要件→仕様→設計→テスト）

本書では、対象を「要求/要件/仕様/設計」に分けます（定義は [00. この本の使い方]({{ '/chapters/00-about-this-book/' | relative_url }}) を参照）。

テンプレは、各段階の成果物（合意の型）に対応しています。

| 区分 | 何を決めるか | 代表成果物 | テンプレ |
| --- | --- | --- | --- |
| 要求 | なぜやるか（目的・課題・KPI） | Needs/Goals の整理 | B-1 |
| 要件 | 何を満たすべきか（Shall） | Requirements 一覧、スコープ、非機能の最小合意 | B-2 |
| 仕様 | どう振る舞うか（外部観測） | 受け入れ条件、例外系、エラー、外部I/Fの振る舞い | B-3 |
| 設計 | どう作るか（内部構造） | S/D/V、設計アウトライン、Change Drivers、ADR | B-4〜B-7 |
| テスト | どこをどう守るか | テスト配分（単体/統合/E2E） | B-8 |

## B-1. 要求（Needs / Goals）整理テンプレ（目的・課題・KPI）

目的: 「なぜやるか」を目的と測定（KPI）として固定し、後続の要件・仕様の判断軸にする。

```md
# 要求（Needs / Goals）: <テーマ>

## 背景/課題（As-Is）

- 何が起きているか（事実）:
- 誰が困っているか:
- 放置するとどうなるか（損失/機会損失）:

## 目的（Goals / To-Be）

- 目標状態（業務/体験）:
- 期限（いつまでに）:

## KPI（測定）

| 指標 | 現状 | 目標 | 測定方法 | 備考 |
| --- | --- | --- | --- | --- |
|  |  |  |  |  |

## スコープ/非ゴール

- 含む:
- 含まない（非ゴール）:

## 制約/前提

- 予算/期限:
- 体制/運用:
- 既存システム/外部I/F:
```

## B-2. 要件（Requirements / Shall）テンプレ（約束の一覧）

目的: 実装方法に依存しない「約束（Shall）」を列挙し、スコープと非機能の最小合意を取る。

```md
# 要件（Requirements / Shall）: <対象>

## スコープ

- 含む:
- 含まない（非ゴール）:

## 機能要件（Shall）

| ID | Shall（要件） | 根拠（要求/KPI） | 優先度 | 備考 |
| --- | --- | --- | --- | --- |
| R-1 |  |  | Must/Should/Could |  |
| R-2 |  |  |  |  |

## 非機能（最小合意）

- 性能:
- 可用性:
- セキュリティ/権限:
- 監査/ログ:
- 運用（アラート/リトライ/バックアップ）:

## 未決/リスク

- 未決事項:
- リスク:
```

## B-3. 仕様（Specification / Behavior）テンプレ（外部観測の振る舞い）

目的: 外部から観測できる振る舞い（入力/出力、状態遷移、エラー）を曖昧さなく定義し、実装と独立した検証基準にする。

```md
# 仕様（Specification / Behavior）: <対象>

## 参照（要求/要件）

- 要求: <リンク/ID>
- 要件: <リンク/ID>

## 外部I/F（観測できる面）

- UI:
- API:
- 外部連携（通知等）:

## 受け入れ条件（Given/When/Then）

- Given: <前提>
  - When: <操作/イベント>
  - Then: <期待結果（観測できる形で）>

## 例外系/失敗時の振る舞い（Behavior）

- 認可失敗:
- 存在しない/不正入力:
- 競合（同時更新）:
- 外部I/F失敗（通知等）:

## 観測点（何をもって合否判定するか）

- 画面表示:
- API レスポンス（ステータス、エラー形式）:
- 監査/ログ（必要なら）:

## テスト観点（仕様から導出）

- 単体テストで守る振る舞い:
- 統合テストで守る契約（境界）:
- E2E で守る導線:
```

## B-4. S/D/V 採点表（依存関係トップ 10）

目的: 依存関係の「痛み」を半定量で把握し、手当（境界/契約/テスト投資）の優先順位を付ける。

採点の目安（例）:

- **S（統合強度）**: 1=独立、3=時々同時変更、5=常に同時変更/同時デプロイ
- **D（距離）**: 1=同一モジュール、3=同一リポジトリ別パッケージ、5=別サービス/別組織/ネットワーク越し
- **V（変動性）**: 1=ほぼ固定、3=四半期で変わる、5=週次で変わる/不確実性が高い

```md
| # | 依存元 | 依存先 | 依存の内容 | S(1-5) | D(1-5) | V(1-5) | コメント（観測/根拠） | 手当案 |
| ---: | --- | --- | --- | ---: | ---: | ---: | --- | --- |
| 1 |  |  |  |  |  |  |  |  |
| 2 |  |  |  |  |  |  |  |  |
| 3 |  |  |  |  |  |  |  |  |
| 4 |  |  |  |  |  |  |  |  |
| 5 |  |  |  |  |  |  |  |  |
| 6 |  |  |  |  |  |  |  |  |
| 7 |  |  |  |  |  |  |  |  |
| 8 |  |  |  |  |  |  |  |  |
| 9 |  |  |  |  |  |  |  |  |
| 10 |  |  |  |  |  |  |  |  |
```

補助質問:

- 同時変更が必要になる原因は何か（データ構造、仕様、例外処理、認可など）
- 距離が大きい場合、契約（インターフェース/スキーマ/契約テスト）は十分か
- 変動性が高い場合、抽象化は「固定化」になっていないか

## B-5. 設計（Design / Structure）アウトラインテンプレ（境界・構造）

目的: 仕様を満たすための内部構造（境界、責務、依存方向、データモデル）を最小で定義する。

```md
# 設計（Design / Structure）: <対象>

## 参照（要求/要件/仕様）

- 要求:
- 要件:
- 仕様:

## 構造（境界と責務）

- domain:
- usecases:
- adapters:

## 依存方向（ルール）

- 依存の向き:
- 例外（許可する参照）:

## データモデル

- 論理（概念/エンティティ）:
- 物理（DB テーブル/インデックス/制約）:

## 重要アルゴリズム/ルール

- 何をどこで計算するか（例: 期限判定、権限判定）:

## トレードオフ

- 得るもの:
- 失うもの:

## テスト戦略への影響

- 単体/統合/E2E の主な対象:
```

## B-6. 変更理由（Change Drivers）整理テンプレ（任意）

目的: 「なぜ今変えるのか」を先に揃え、設計変更の正当化（後付け）を避ける。

```md
# Change Drivers: <変更のテーマ>

## 背景（何が起きているか）

- 事象（観測）:
- 影響（価値/運用/コスト）:
- 期限（いつまでに）:

## ドライバー（何が変更を必要にしているか）

| ドライバー | 内容 | 強さ（低/中/高） | 根拠 |
| --- | --- | --- | --- |
| 変動性（V） |  |  |  |
| 距離（D） |  |  |  |
| 統合強度（S） |  |  |  |
| 運用要件 |  |  |  |
| チーム/組織 |  |  |  |

## 対応方針（案）

- 何を変える:
- 変えないこと（非ゴール）:
- テスト戦略への影響:
- ADR が必要か:
```

## B-7. ADR テンプレ（Context / Decision / Consequences）

```md
# ADR: <短いタイトル>

- Status: proposed | accepted | superseded
- Date: YYYY-MM-DD
- Deciders: <意思決定者/関係者>
- Scope: <対象範囲（モジュール/機能/チーム）>

## Context

- 背景:
- 問題:
- 制約（要件/非機能/運用）:
- 既存の選択（As-Is）:

## Decision

- 採用する決定:
- 理由（S/D/V、複雑性、テスト戦略との整合）:

## Consequences

- 得られる効果:
- 失うもの/トレードオフ:
- 後続タスク:
- 見直し条件（いつ再評価するか）:
```

## B-8. テスト配分テンプレ（単体/統合/E2E）

```md
# テスト配分: <対象機能/導線>

## 方針（ねらい）

- 価値導線:
- 主要リスク:
- 許容できない障害:

## 配分

| レベル | ねらい | 対象 | 備考 |
| --- | --- | --- | --- |
| 単体 | コアの振る舞い保護 | 純粋ロジック / 変換 / ルール | 実装詳細への依存を避ける |
| 統合 | 境界の契約保護 | API / DB / 認可 / 外部連携 | 失敗時の動作も含める |
| E2E | 価値導線の保護 | 主要ユーザーフロー（少数） | 不安定要因を最小化 |

## 禁止事項（例）

- E2E の増やし過ぎ（時間・不安定さで破綻）
- 単体テストで外部 I/O を扱う（統合で検証する）
- モック過多（設計の境界が崩れている兆候）
```

## 前後リンク

- [目次]({{ '/chapters/' | relative_url }})
- [前: Appendix A（チェックリスト）]({{ '/appendix/A-checklists/' | relative_url }})
- [次: Appendix D（記入例）]({{ '/appendix/D-samples/' | relative_url }})
