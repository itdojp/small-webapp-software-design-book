---
title: "Appendix B: テンプレ集"
permalink: /appendix/B-templates/
show_nav: true
prev: /appendix/A-checklists/
next: /appendix/C-references/
---

# Appendix B: テンプレ集

本書で扱う判断・合意を「再利用可能な形式」にするためのテンプレートです。必要に応じてチーム向けに最小改変して使ってください。

## B-1. S/D/V 採点表（依存関係トップ 10）

目的: 依存関係の「痛み」を半定量で把握し、手当の優先順位を付ける。

採点の目安（例）:

- **S（統合強度）**: 1=独立、3=時々同時変更、5=常に同時変更/同時デプロイ
- **D（距離）**: 1=同一モジュール、3=同一リポジトリ別パッケージ、5=別サービス/別組織/ネットワーク越し
- **V（変動性）**: 1=ほぼ固定、3=四半期で変わる、5=週次で変わる/不確実性が高い

```md
| # | 依存元 | 依存先 | 依存の内容 | S(1-5) | D(1-5) | V(1-5) | コメント（観測/根拠） | 手当案 |
|---:|---|---|---|---:|---:|---:|---|---|
| 1 |  |  |  |  |  |  |  |  |
| 2 |  |  |  |  |  |  |  |  |
| 3 |  |  |  |  |  |  |  |  |
| 4 |  |  |  |  |  |  |  |  |
| 5 |  |  |  |  |  |  |  |  |
| 6 |  |  |  |  |  |  |  |  |
| 7 |  |  |  |  |  |  |  |  |
| 8 |  |  |  |  |  |  |  |  |
| 9 |  |  |  |  |  |  |  |  |
| 10 |  |  |  |  |  |  |  |  |
```

補助質問:

- 同時変更が必要になる原因は何か（データ構造、仕様、例外処理、認可など）
- 距離が大きい場合、契約（インターフェース/スキーマ/契約テスト）は十分か
- 変動性が高い場合、抽象化は「固定化」になっていないか

## B-2. ADR テンプレ（Context / Decision / Consequences）

```md
# ADR: <短いタイトル>

- Status: proposed | accepted | superseded
- Date: YYYY-MM-DD
- Deciders: <意思決定者/関係者>
- Scope: <対象範囲（モジュール/機能/チーム）>

## Context

- 背景:
- 問題:
- 制約（要件/非機能/運用）:
- 既存の選択（As-Is）:

## Decision

- 採用する決定:
- 理由（S/D/V、複雑性、テスト戦略との整合）:

## Consequences

- 得られる効果:
- 失うもの/トレードオフ:
- 後続タスク:
- 見直し条件（いつ再評価するか）:
```

## B-3. 受け入れ条件テンプレ（機能・非機能・テスト観点）

```md
# 受け入れ条件: <機能名>

## 機能要件

- ユーザーストーリー:
- スコープ:
  - 含む:
  - 含まない:

## 受け入れ条件（Given/When/Then）

- Given: <前提>
  - When: <操作/イベント>
  - Then: <期待結果>

## 非機能（最小合意）

- 性能:
- 可用性:
- セキュリティ/権限:
- 監査/ログ:
- 運用（アラート/リトライ/バックアップ）:

## テスト観点

- 単体テストで守る振る舞い:
- 統合テストで守る契約（境界）:
- E2E で守る導線:
- 例外系/失敗時の期待:
```

## B-4. テスト配分テンプレ（単体/統合/E2E）

```md
# テスト配分: <対象機能/導線>

## 方針（ねらい）

- 価値導線:
- 主要リスク:
- 許容できない障害:

## 配分

| レベル | ねらい | 対象 | 備考 |
|---|---|---|---|
| 単体 | コアの振る舞い保護 | 純粋ロジック / 変換 / ルール | 実装詳細への依存を避ける |
| 統合 | 境界の契約保護 | API / DB / 認可 / 外部連携 | 失敗時の動作も含める |
| E2E | 価値導線の保護 | 主要ユーザーフロー（少数） | 不安定要因を最小化 |

## 禁止事項（例）

- E2E の増やし過ぎ（時間・不安定さで破綻）
- 単体テストで外部I/O を扱う（統合で検証する）
- モック過多（設計の境界が崩れている兆候）
```

## B-5. 変更理由（Change Drivers）整理テンプレ（任意）

目的: 「なぜ今変えるのか」を先に揃え、設計変更の正当化（後付け）を避ける。

```md
# Change Drivers: <変更のテーマ>

## 背景（何が起きているか）

- 事象（観測）:
- 影響（価値/運用/コスト）:
- 期限（いつまでに）:

## ドライバー（何が変更を必要にしているか）

| ドライバー | 内容 | 強さ（低/中/高） | 根拠 |
|---|---|---|---|
| 変動性（V） |  |  |  |
| 距離（D） |  |  |  |
| 統合強度（S） |  |  |  |
| 運用要件 |  |  |  |
| チーム/組織 |  |  |  |

## 対応方針（案）

- 何を変える:
- 変えないこと（非ゴール）:
- テスト戦略への影響:
- ADR が必要か:
```

## 前後リンク

- [目次]({{ '/chapters/' | relative_url }})
- [前: Appendix A（チェックリスト）]({{ '/appendix/A-checklists/' | relative_url }})
- [次: Appendix C（参考文献・リンク）]({{ '/appendix/C-references/' | relative_url }})
